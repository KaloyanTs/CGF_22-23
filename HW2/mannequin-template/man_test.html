<!DOCTYPE html>

<html>

<head>
    <script src="three.min.js"></script>
    <script src="mannequin.js"></script>
    <script src="OrbitControls.js"></script>
    <style>
        body {
            color: black;
            text-shadow: 0 0 4px gray;
            font-family: Calibri;
        }

        h1 {
            position: fixed;
            z-index: 10;
            top: 0;
            left: 0;
            text-align: center;
            width: 100%;
        }

        div {
            position: fixed;
            z-index: 10;
            bottom: 1em;
            left: 1em;
            font-size: 1.5em;
            font-style: italic;
        }
    </style>
</head>

<body>

    <h1>Testing posture</h1>

    <div>
        X
    </div>

    <script>
        createScene();
        var p1, p2, ball, spectator, A, B, ballFly1, ballFly2, car, car2, car3;

        p1 = new Male();
        p2 = new Male();
        p2.position.z = 20;
        p1.position.z = -20;

        A = { "version": 6, "data": [-3, [-1.9, -63.9, -1.3], [0, 0, -2], [6.7, 14.3, 4.3], [6, -13.8, 35.8], [47.8], [-6, -6, -9.5], [-6, 0, 22.1], [53.2], [6, 6, -27.6], [2.4, 18.9, 37], [36.7], [49.5, -84.1, 70], [34.3, 100], [3.6, 4.4, 26.2], [49.5], [-18.8, 57.3, 29.4], [56.1, 10]] };
        B = { "version": 6, "data": [-5, [-1.9, -63.9, -1.3], [8.8, -0.3, -2.3], [11, -28, 7.1], [6, -13.8, 23], [67.7], [-6, -6, -46.3], [-6, 0, 25.5], [67.7], [6, 6, -48.6], [40.1, -51, 70.2], [23.9], [49.5, -84.1, 70], [34.3, 100], [-5.4, -37.5, 34.9], [27.1], [-18.8, 57.3, 29.4], [56.1, 10]] };

        //ballFly1 = { "version": 6, "data": [3.5, [-70.4, -88.3, -1], [15.6, 32.7, -14.1], [27.1, -44.9, 6.4], [-54.9, 61.1, 121], [65.5], [-6, -6, -0.6], [-6, -38.2, 26.5], [70.5], [6, 6, -0.6], [26.4, -32.3, 8.9], [16.5], [84.2, -46.6, 89.9], [72.5, 97.8], [89.9, -73.2, -135], [79.6], [-89.2, 0, 89.9], [72.9, 69.8]] };
        //ballFly2 = { "version": 6, "data": [3.5, [111.4, -55.4, 179.6], [17.6, 38.8, -15.2], [17.8, 46.6, 6.6], [-54.9, 61.1, 118.3], [63.5], [-6, -6, 35.9], [-36.7, 32.2, 102.6], [121.2], [6, 6, 37.1], [-2, 71.9, 24.7], [16.5], [-32.1, 25.2, 49.4], [72.5, 97.8], [25.1, -33.6, 109.8], [79.6], [-89.2, 0, 89.9], [72.9, 69.8]] };

        scene.rotation.y = Math.PI / 2 + Math.PI / 8;

        function calc(x, y, k) {
            return (1 - k) * x + k * y;
        }

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        function animate(t) {

            p1.body.position.y = calc(-3, -5, Math.sin(t / 50) / 2 + 1 / 2);

            p1.body.bend = -0.40637343401064374;
            p1.body.turn = -63.9;
            p1.body.tilt = 0.8357818881860015;

            p1.torso.tilt = calc(0, -8.8, Math.sin(t / 50) / 2 + 1 / 2);
            p1.torso.turn = calc(0, 0.05, Math.sin(t / 50) / 2 + 1 / 2);
            p1.torso.bend = calc(2, 2.346, Math.sin(t / 50) / 2 + 1 / 2);

            p1.head.tilt = calc(-13.05, -19.408, Math.sin(t / 50) / 2 + 1 / 2);
            p1.head.turn = calc(27.54, -58.04, Math.sin(t / 50) / 2 + 1 / 2);
            p1.head.nod = calc(-11.92, -3.77, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_leg.straddle = calc(6, 6, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_leg.turn = calc(-13.8, -13.8, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_leg.raise = calc(35.8, 23, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_knee.bend = calc(47.8, 67.7, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_ankle.tilt = calc(6.03, 8.507, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_ankle.turn = calc(6.90, 8.475, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_ankle.bend = calc(8.87, 45.67, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_leg.straddle = calc(-6, -6, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_leg.turn = calc(0, 0, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_leg.raise = calc(22.1, 25.5, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_knee.bend = calc(53.2, 67.7, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_ankle.tilt = calc(6.688, 8.873, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_ankle.turn = calc(8.087, 8.462, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_ankle.bend = calc(26.97, 47.97, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_arm.raise = calc(37.77780901425354, 36.99855573091134, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_arm.straddle = calc(2.871765947011148, 29.039812089115575, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_arm.turn = calc(13.86210051139402, -59.19640006384891, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_elbow.bend = calc(36.7, 23.9, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_wrist.tilt = calc(-20.650344929476155, -20.650344929476155, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_wrist.turn = calc(85.91820382132427, 85.91820382132427, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_wrist.bend = calc(4.789469698406327, 4.789469698406327, Math.sin(t / 50) / 2 + 1 / 2);

            p1.l_fingers.turn = calc(34.3, 34.3, Math.sin(t / 50) / 2 + 1 / 2);
            p1.l_fingers.bend = calc(100, 100, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_arm.straddle = calc(-4, 5.44, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_arm.turn = calc(-2.35, 29.29, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_arm.raise = calc(26.47, 38.19, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_elbow.bend = calc(49.5, 27.1, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_wrist.tilt = calc(13.414, 10.301613881328315, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_wrist.turn = calc(59.03, 59.032103526880746, Math.sin(t / 50) / 2 + 1 / 2);
            p1.r_wrist.bend = calc(10.30, 13.414388104774785, Math.sin(t / 50) / 2 + 1 / 2);

            p1.r_fingers.posture = [56.1, 10];

            p2.posture = Mannequin.blend(A, B, Math.sin(t / 50) / 2 + 1 / 2);

            scene.rotation.y = Math.PI / 3;
        }

    </script>
</body>

</html>